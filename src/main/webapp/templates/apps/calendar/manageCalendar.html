<html>
    <head>
        <title>Calendar</title>
	    <link href="/static/css/fullcalendar-1.6.4.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="calendars.js">//</script>
        <script type="text/javascript" src="manageCalendars.js">//</script>
        <script type="text/javascript" src="cal-utils.js">//</script>
        <script type="text/javascript" src="/static/js/fullcalendar-1.6.4.js">//</script>
	    <script type="text/javascript" src="/static/js/jquery.fileupload.js"></script>
	    <script type="text/javascript" src="/static/js/jquery.milton-upload.js"></script>
    </head>    
    <body class="directory">

        <!--<div class="input pull-right" id='myUploaded' style="width: 200px"></div>-->

        <p>
	        <a class="btn btn-primary btn-add-event"><i class="fa fa-plus"></i> Add new event</a>
        </p>

        <div class="row">
	        <div class="col-md-6 col-sm-12">
		        <div class="panel panel-default">
			        <div class="panel-heading">
				        <i class="clip-list"></i>
				        List of calendars
			        </div>
			        <div class="panel-body">
				        <table class="table table-bordered table-striped table-hover">
					        <colgroup>
						        <col />
						        <col />
						        <col />
						        <col style="width: 80px" />
					        </colgroup>
					        <thead>
						        <tr>
							        <th>Events</th>
							        <th>Start</th>
							        <th>Finish</th>
							        <th class="action">Action</th>
						        </tr>
					        </thead>
					        <tbody>
						        #set($items = $page.upcomingEvents)
						        #if( $items.isEmpty() )
						        <tr>
							        <td colspan="4">There are no events. Add one using the Add button above, or upload ical files</td>
						        </tr>
						        #else
						        #foreach($event in $items)
						        <tr>
							        <td><a href="$event.href">$event.summary</a></td>
							        <td><a href="$event.href">$formatter.formatDateTime($event.startDate)</a></td>
							        <td><a href="$event.href">$formatter.formatDateTime($event.endDate)</a></td>
							        <td class="action">
								        <div class="btn-group btn-group-sm">
									        <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown">
										        <span class="clip-settings"></span>
									        </button>
									        <ul class="dropdown-menu pull-right" role="menu">
										        <li><a title="Edit" href="$event.name">Edit</a></li>
										        <li class="divider"></li>
										        <li><a class="btn-delete" title="Delete" href="$event.name">Delete</a></li>
									        </ul>
								        </div>
							        </td>
						        </tr>
						        #end
						        #end
					        </tbody>
				        </table>
			        </div>
		        </div>
	        </div>
	        <div class="col-md-6 col-sm-12">
		        <div class="panel panel-default">
			        <div class="panel-heading">
				        <i class="clip-calendar"></i>
				        Calendar
			        </div>
			        <div class="panel-body">
				        <div id="calendar" class="calendar-container"></div>
			        </div>
		        </div>
	        </div>
        </div>

        <div id="modal-add-event" class="modal modal-sm fade" aria-hidden="true" tabindex="-1">
	        <div class="modal-header">
		        <button aria-hidden="true" data-dismiss="modal" class="close" type="button">&times;</button>
		        <h4 class="modal-title">Add Event</h4>
	        </div>
	        <div class="modal-body">
		        <form method="post" action="." class="form-horizontal">
			        <input type="hidden" name="action" value="create"/>
			        <div class="form-group">
				        <label class="control-label col-md-4" for="startDate">Start date</label>
				        <div class="col-md-8">
					        <input type="text" name="startDate" id="startDate" value="" class="DateTime required form-control date-picker" maxlength="30" data-date-viewmode="years" data-date-format="mm/dd/yyyy" />
				        </div>
			        </div>
			        <div class="form-group">
				        <label class="control-label col-md-4" for="endDate">End date</label>
				        <div class="col-md-8">
					        <input type="text" name="endDate" id="endDate" value="" class="DateTime required form-control date-picker" maxlength="" data-date-viewmode="years" data-date-format="mm/dd/yyyy" />
				        </div>
			        </div>
			        <div class="form-group">
				        <label class="control-label col-md-4" for="summary">Short summary</label>
				        <div class="col-md-8">
					        <textarea name="summary" id="summary" class="form-control" rows="3"></textarea>
				        </div>
			        </div>

			        <div class="form-group">
				        <label class="control-label col-md-4" for="description">Long Description</label>
				        <div class="col-md-8">
					        <textarea name="description" id="description" class="form-control" rows="3"></textarea>
				        </div>
			        </div>
		        </form>
	        </div>
	        <div class="modal-footer">
		        <button class="btn btn-default" data-dismiss="modal" type="button">Close</button>
		        <button class="btn btn-primary" data-type="form-submit" type="button">Save</button>
	        </div>
        </div>       

        <script type="text/javascript">
            Bob.onDOMReady(function () {
                initManageCalendar();
            });
        </script>        
    </body>
</html>